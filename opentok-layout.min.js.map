{"version":3,"sources":["webpack://initLayoutContainer/webpack/universalModuleDefinition","webpack://initLayoutContainer/./src/getLayout.js","webpack://initLayoutContainer/./src/index.js","webpack://initLayoutContainer/./src/layout.js","webpack://initLayoutContainer/webpack/bootstrap","webpack://initLayoutContainer/webpack/startup"],"names":["root","factory","exports","module","define","amd","self","this","getBestDimensions","minRatio","maxRatio","Width","Height","count","maxWidth","maxHeight","maxArea","targetCols","targetRows","targetHeight","targetWidth","tWidth","tHeight","tRatio","i","cols","rows","Math","ceil","floor","area","min","undefined","ratio","getLayout","opts","elements","fixedRatio","containerWidth","containerHeight","offsetLeft","offsetTop","alignItems","Infinity","scaleLastRow","ratios","map","element","height","width","length","dimensions","x","y","row","boxes","push","totalRowHeight","remainingShortRows","remainingHeightDiff","extraHeight","rowMarginLeft","j","left","top","bigPercentage","bigFixedRatio","bigMaxRatio","bigMinRatio","bigFirst","bigAlignItems","smallAlignItems","smallMaxWidth","smallMaxHeight","bigMaxWidth","bigMaxHeight","bigScaleLastRow","availableRatio","bigOffsetTop","bigOffsetLeft","bigIndices","bigOnes","filter","idx","big","smallOnes","bigBoxes","smallBoxes","bigWidth","bigHeight","showBigFirst","bigBoxesIdx","smallBoxesIdx","forEach","indexOf","require","layout","container","win","window","document","querySelector","HTMLElement","bind","css","el","propertyName","value","style","NaN","Object","keys","key","currentValue","getComputedStyle","getPropertyValue","getCSSNumber","elem","prop","cssStr","parseInt","animate","bigClass","ignoreClass","heightStr","id","getAttribute","random","toFixed","setAttribute","offsetHeight","widthStr","offsetWidth","getWidth","children","Array","prototype","call","querySelectorAll","res","child","videoHeight","videoWidth","video","getChildDims","classList","contains","box","actualWidth","actualHeight","w","h","onLayout","targetPosition","fixAspectRatio","sub","oldWidth","$","stop","duration","easing","complete","add","positionElement","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"mappings":"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","file":"opentok-layout.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"initLayoutContainer\"] = factory();\n\telse\n\t\troot[\"initLayoutContainer\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn ","const getBestDimensions = (minRatio, maxRatio, Width, Height, count, maxWidth, maxHeight) => {\n  let maxArea;\n  let targetCols;\n  let targetRows;\n  let targetHeight;\n  let targetWidth;\n  let tWidth;\n  let tHeight;\n  let tRatio;\n\n  // Iterate through every possible combination of rows and columns\n  // and see which one has the least amount of whitespace\n  for (let i = 1; i <= count; i += 1) {\n    const cols = i;\n    const rows = Math.ceil(count / cols);\n\n    // Try taking up the whole height and width\n    tHeight = Math.floor(Height / rows);\n    tWidth = Math.floor(Width / cols);\n\n    tRatio = tHeight / tWidth;\n    if (tRatio > maxRatio) {\n      // We went over decrease the height\n      tRatio = maxRatio;\n      tHeight = tWidth * tRatio;\n    } else if (tRatio < minRatio) {\n      // We went under decrease the width\n      tRatio = minRatio;\n      tWidth = tHeight / tRatio;\n    }\n\n    tWidth = Math.min(maxWidth, tWidth);\n    tHeight = Math.min(maxHeight, tHeight);\n\n    const area = (tWidth * tHeight) * count;\n\n    // If this width and height takes up the most space then we're going with that\n    if (maxArea === undefined || (area >= maxArea)) {\n      maxArea = area;\n      targetHeight = tHeight;\n      targetWidth = tWidth;\n      targetCols = cols;\n      targetRows = rows;\n    }\n  }\n  return {\n    maxArea,\n    targetCols,\n    targetRows,\n    targetHeight,\n    targetWidth,\n    ratio: targetHeight / targetWidth,\n  };\n};\n\nconst getLayout = (opts, elements) => {\n  const {\n    maxRatio,\n    minRatio,\n    fixedRatio,\n    containerWidth,\n    containerHeight,\n    offsetLeft = 0,\n    offsetTop = 0,\n    alignItems = 'center',\n    maxWidth = Infinity,\n    maxHeight = Infinity,\n    scaleLastRow = true,\n  } = opts;\n  const ratios = elements.map(element => element.height / element.width);\n  const count = ratios.length;\n\n\n  let dimensions;\n\n  if (!fixedRatio) {\n    dimensions = getBestDimensions(minRatio, maxRatio, containerWidth, containerHeight, count,\n      maxWidth, maxHeight);\n  } else {\n    // Use the ratio of the first video element we find to approximate\n    const ratio = ratios.length > 0 ? ratios[0] : null;\n    dimensions = getBestDimensions(ratio, ratio, containerWidth, containerHeight, count,\n      maxWidth, maxHeight);\n  }\n\n  // Loop through each stream in the container and place it inside\n  let x = 0;\n  let y = 0;\n  const rows = [];\n  let row;\n  const boxes = [];\n  // Iterate through the children and create an array with a new item for each row\n  // and calculate the width of each row so that we know if we go over the size and need\n  // to adjust\n  for (let i = 0; i < ratios.length; i += 1) {\n    if (i % dimensions.targetCols === 0) {\n      // This is a new row\n      row = {\n        ratios: [],\n        width: 0,\n        height: 0,\n      };\n      rows.push(row);\n    }\n    const ratio = ratios[i];\n    row.ratios.push(ratio);\n    let targetWidth = dimensions.targetWidth;\n    const targetHeight = dimensions.targetHeight;\n    // If we're using a fixedRatio then we need to set the correct ratio for this element\n    if (fixedRatio) {\n      targetWidth = targetHeight / ratio;\n    }\n    row.width += targetWidth;\n    row.height = targetHeight;\n  }\n  // Calculate total row height adjusting if we go too wide\n  let totalRowHeight = 0;\n  let remainingShortRows = 0;\n  for (let i = 0; i < rows.length; i += 1) {\n    row = rows[i];\n    if (row.width > containerWidth) {\n      // Went over on the width, need to adjust the height proportionally\n      row.height = Math.floor(row.height * (containerWidth / row.width));\n      row.width = containerWidth;\n    } else if (row.width < containerWidth && row.height < maxHeight) {\n      remainingShortRows += 1;\n    }\n    totalRowHeight += row.height;\n  }\n  if (scaleLastRow && totalRowHeight < containerHeight && remainingShortRows > 0) {\n    // We can grow some of the rows, we're not taking up the whole height\n    let remainingHeightDiff = containerHeight - totalRowHeight;\n    totalRowHeight = 0;\n    for (let i = 0; i < rows.length; i += 1) {\n      row = rows[i];\n      if (row.width < containerWidth) {\n        // Evenly distribute the extra height between the short rows\n        let extraHeight = remainingHeightDiff / remainingShortRows;\n        if ((extraHeight / row.height) > ((containerWidth - row.width) / row.width)) {\n          // We can't go that big or we'll go too wide\n          extraHeight = Math.floor(((containerWidth - row.width) / row.width) * row.height);\n        }\n        row.width += Math.floor((extraHeight / row.height) * row.width);\n        row.height += extraHeight;\n        remainingHeightDiff -= extraHeight;\n        remainingShortRows -= 1;\n      }\n      totalRowHeight += row.height;\n    }\n  }\n  switch (alignItems) {\n    case 'start':\n      y = 0;\n      break;\n    case 'end':\n      y = containerHeight - totalRowHeight;\n      break;\n    case 'center':\n    default:\n      y = ((containerHeight - (totalRowHeight)) / 2);\n      break;\n  }\n  // Iterate through each row and place each child\n  for (let i = 0; i < rows.length; i += 1) {\n    row = rows[i];\n    let rowMarginLeft;\n    switch (alignItems) {\n      case 'start':\n        rowMarginLeft = 0;\n        break;\n      case 'end':\n        rowMarginLeft = containerWidth - row.width;\n        break;\n      case 'center':\n      default:\n        rowMarginLeft = ((containerWidth - row.width) / 2);\n        break;\n    }\n    x = rowMarginLeft;\n    let targetHeight;\n    for (let j = 0; j < row.ratios.length; j += 1) {\n      const ratio = row.ratios[j];\n\n      let targetWidth = dimensions.targetWidth;\n      targetHeight = row.height;\n      // If we're using a fixedRatio then we need to set the correct ratio for this element\n      if (fixedRatio) {\n        targetWidth = Math.floor(targetHeight / ratio);\n      } else if ((targetHeight / targetWidth)\n        !== (dimensions.targetHeight / dimensions.targetWidth)) {\n        // We grew this row, we need to adjust the width to account for the increase in height\n        targetWidth = Math.floor((dimensions.targetWidth / dimensions.targetHeight) * targetHeight);\n      }\n\n      boxes.push({\n        left: x + offsetLeft,\n        top: y + offsetTop,\n        width: targetWidth,\n        height: targetHeight,\n      });\n      x += targetWidth;\n    }\n    y += targetHeight;\n  }\n  return boxes;\n};\n\nconst getVideoRatio = element => element.height / element.width;\n\nmodule.exports = (opts, elements) => {\n  const {\n    maxRatio = 3 / 2,\n    minRatio = 9 / 16,\n    fixedRatio = false,\n    bigPercentage = 0.8,\n    bigFixedRatio = false,\n    bigMaxRatio = 3 / 2,\n    bigMinRatio = 9 / 16,\n    bigFirst = true,\n    containerWidth = 640,\n    containerHeight = 480,\n    alignItems = 'center',\n    bigAlignItems = 'center',\n    smallAlignItems = 'center',\n    maxWidth = Infinity,\n    maxHeight = Infinity,\n    smallMaxWidth = Infinity,\n    smallMaxHeight = Infinity,\n    bigMaxWidth = Infinity,\n    bigMaxHeight = Infinity,\n    scaleLastRow = true,\n    bigScaleLastRow = true,\n  } = opts;\n\n  const availableRatio = containerHeight / containerWidth;\n  let offsetLeft = 0;\n  let offsetTop = 0;\n  let bigOffsetTop = 0;\n  let bigOffsetLeft = 0;\n  const bigIndices = [];\n  const bigOnes = elements.filter((element, idx) => {\n    if (element.big) {\n      bigIndices.push(idx);\n      return true;\n    }\n    return false;\n  });\n  const smallOnes = elements.filter(element => !element.big);\n  let bigBoxes = [];\n  let smallBoxes = [];\n  if (bigOnes.length > 0 && smallOnes.length > 0) {\n    let bigWidth;\n    let bigHeight;\n    let showBigFirst = bigFirst === true;\n\n    if (availableRatio > getVideoRatio(bigOnes[0])) {\n      // We are tall, going to take up the whole width and arrange small\n      // guys at the bottom\n      bigWidth = containerWidth;\n      bigHeight = Math.floor(containerHeight * bigPercentage);\n      offsetTop = bigHeight;\n      bigOffsetTop = containerHeight - offsetTop;\n      if (bigFirst === 'column') {\n        showBigFirst = false;\n      } else if (bigFirst === 'row') {\n        showBigFirst = true;\n      }\n    } else {\n      // We are wide, going to take up the whole height and arrange the small\n      // guys on the right\n      bigHeight = containerHeight;\n      bigWidth = Math.floor(containerWidth * bigPercentage);\n      offsetLeft = bigWidth;\n      bigOffsetLeft = containerWidth - offsetLeft;\n      if (bigFirst === 'column') {\n        showBigFirst = true;\n      } else if (bigFirst === 'row') {\n        showBigFirst = false;\n      }\n    }\n    if (showBigFirst) {\n      bigBoxes = getLayout({\n        containerWidth: bigWidth,\n        containerHeight: bigHeight,\n        offsetLeft: 0,\n        offsetTop: 0,\n        fixedRatio: bigFixedRatio,\n        minRatio: bigMinRatio,\n        maxRatio: bigMaxRatio,\n        alignItems: bigAlignItems,\n        maxWidth: bigMaxWidth,\n        maxHeight: bigMaxHeight,\n        scaleLastRow: bigScaleLastRow,\n      }, bigOnes);\n      smallBoxes = getLayout({\n        containerWidth: containerWidth - offsetLeft,\n        containerHeight: containerHeight - offsetTop,\n        offsetLeft,\n        offsetTop,\n        fixedRatio,\n        minRatio,\n        maxRatio,\n        alignItems: smallAlignItems,\n        maxWidth: smallMaxWidth,\n        maxHeight: smallMaxHeight,\n        scaleLastRow,\n      }, smallOnes);\n    } else {\n      smallBoxes = getLayout({\n        containerWidth: containerWidth - offsetLeft,\n        containerHeight: containerHeight - offsetTop,\n        offsetLeft: 0,\n        offsetTop: 0,\n        fixedRatio,\n        minRatio,\n        maxRatio,\n        alignItems: smallAlignItems,\n        maxWidth: smallMaxWidth,\n        maxHeight: smallMaxHeight,\n        scaleLastRow,\n      }, smallOnes);\n      bigBoxes = getLayout({\n        containerWidth: bigWidth,\n        containerHeight: bigHeight,\n        offsetLeft: bigOffsetLeft,\n        offsetTop: bigOffsetTop,\n        fixedRatio: bigFixedRatio,\n        minRatio: bigMinRatio,\n        alignItems: bigAlignItems,\n        maxWidth: bigMaxWidth,\n        maxHeight: bigMaxHeight,\n        scaleLastRow: bigScaleLastRow,\n      }, bigOnes);\n    }\n  } else if (bigOnes.length > 0 && smallOnes.length === 0) {\n    // We only have one bigOne just center it\n    bigBoxes = getLayout({\n      containerWidth,\n      containerHeight,\n      fixedRatio: bigFixedRatio,\n      minRatio: bigMinRatio,\n      maxRatio: bigMaxRatio,\n      alignItems: bigAlignItems,\n      maxWidth: bigMaxWidth,\n      maxHeight: bigMaxHeight,\n      scaleLastRow: bigScaleLastRow,\n    }, bigOnes);\n  } else {\n    smallBoxes = getLayout({\n      containerWidth: containerWidth - offsetLeft,\n      containerHeight: containerHeight - offsetTop,\n      offsetLeft,\n      offsetTop,\n      fixedRatio,\n      minRatio,\n      maxRatio,\n      alignItems,\n      maxWidth,\n      maxHeight,\n      scaleLastRow,\n    }, smallOnes);\n  }\n\n  const boxes = [];\n  let bigBoxesIdx = 0;\n  let smallBoxesIdx = 0;\n  // Rebuild the array in the right order based on where the bigIndices should be\n  elements.forEach((element, idx) => {\n    if (bigIndices.indexOf(idx) > -1) {\n      boxes[idx] = bigBoxes[bigBoxesIdx];\n      bigBoxesIdx += 1;\n    } else {\n      boxes[idx] = smallBoxes[smallBoxesIdx];\n      smallBoxesIdx += 1;\n    }\n  });\n  return boxes;\n};\n","/*!\n *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)\n *\n *  Automatic layout of video elements (publisher and subscriber) minimising\n *  white-space for the OpenTok on WebRTC API.\n *\n *  @Author: Adam Ullman (http://github.com/aullman)\n *  @Copyright (c) 2014 Adam Ullman\n *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)\n * */\n\n// in CommonJS context, this should be a `require()`d dependency.\n// in browser globals context, ...? (when using bower, there are dependencies that it has handled\n// for you, so these might be safe to assume)\n\nconst getLayout = require('./getLayout');\nconst layout = require('./layout');\n\nmodule.exports = function initLayoutContainer(container, opts) {\n  const win = (opts && opts.window) || (typeof window === 'undefined' ? undefined : window);\n  container = typeof container === 'string' ? win.document.querySelector(container) : container;\n  if (!(typeof (win && win.HTMLElement) === 'undefined' || container instanceof win.HTMLElement) && !opts) {\n    // container is actually the options\n    opts = container;\n  } else if (!opts) {\n    opts = {};\n  }\n\n  return {\n    layout: layout.bind(this, container, opts),\n    getLayout: getLayout.bind(this, opts),\n  };\n};\n","const getLayout = require('./getLayout');\n\nmodule.exports = (container, opts) => {\n  function css(el, propertyName, value) {\n    if (value) {\n      // We are setting one css property\n      el.style[propertyName] = value;\n      return NaN;\n    }\n    if (typeof propertyName === 'object') {\n      // We are setting several CSS properties at once\n      Object.keys(propertyName).forEach((key) => {\n        css(el, key, propertyName[key]);\n      });\n      return NaN;\n    }\n    // We are getting the css property\n    const computedStyle = ((opts && opts.window) || window).getComputedStyle(el);\n    let currentValue = computedStyle.getPropertyValue(propertyName);\n\n    if (currentValue === '') {\n      currentValue = el.style[propertyName];\n    }\n\n    return currentValue;\n  }\n\n  const filterDisplayNone = element => css(element, 'display') !== 'none';\n\n  function height(el) {\n    if (el.offsetHeight > 0) {\n      return `${el.offsetHeight}px`;\n    }\n    return css(el, 'height');\n  }\n\n  function width(el) {\n    if (el.offsetWidth > 0) {\n      return `${el.offsetWidth}px`;\n    }\n    return css(el, 'width');\n  }\n\n  const positionElement = function positionElement(elem, x, y, w, h, animate, onLayout) {\n    const targetPosition = {\n      left: `${x}px`,\n      top: `${y}px`,\n      width: `${w}px`,\n      height: `${h}px`,\n    };\n\n    const fixAspectRatio = function fixAspectRatio() {\n      const sub = elem.querySelector('.OT_root');\n      if (sub) {\n        // If this is the parent of a subscriber or publisher then we need\n        // to force the mutation observer on the publisher or subscriber to\n        // trigger to get it to fix it's layout\n        const oldWidth = sub.style.width;\n        sub.style.width = `${w}px`;\n        // sub.style.height = height + 'px';\n        sub.style.width = oldWidth || '';\n      }\n    };\n\n    if (animate && typeof $ !== 'undefined') {\n      $(elem).stop();\n      $(elem).animate(targetPosition, animate.duration || 200, animate.easing || 'swing',\n        () => {\n          fixAspectRatio();\n          if (animate.complete) animate.complete.call(this);\n          if (onLayout) {\n            onLayout(elem, {\n              left: x,\n              top: y,\n              width: w,\n              height: h,\n            });\n          }\n        });\n    } else {\n      css(elem, targetPosition);\n      if (!elem.classList.contains('ot-layout')) {\n        elem.classList.add('ot-layout');\n      }\n      if (onLayout) {\n        onLayout(elem, {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        });\n      }\n    }\n    fixAspectRatio();\n  };\n\n  const getChildDims = function getChildDims(child) {\n    if (child) {\n      if (child.videoHeight && child.videoWidth) {\n        return {\n          height: child.videoHeight,\n          width: child.videoWidth,\n        };\n      }\n      const video = child.querySelector('video');\n      if (video && video.videoHeight && video.videoWidth) {\n        return {\n          height: video.videoHeight,\n          width: video.videoWidth,\n        };\n      }\n    }\n    return {\n      height: 480,\n      width: 640,\n    };\n  };\n\n  const getCSSNumber = function getCSSNumber(elem, prop) {\n    const cssStr = css(elem, prop);\n    return cssStr ? parseInt(cssStr, 10) : 0;\n  };\n\n  // Really cheap UUID function\n  const cheapUUID = function cheapUUID() {\n    return (Math.random() * 100000000).toFixed(0);\n  };\n\n  const getHeight = function getHeight(elem) {\n    const heightStr = height(elem);\n    return heightStr ? parseInt(heightStr, 10) : 0;\n  };\n\n  const getWidth = function getWidth(elem) {\n    const widthStr = width(elem);\n    return widthStr ? parseInt(widthStr, 10) : 0;\n  };\n\n  const {\n    animate = false,\n    bigClass = 'OT_big',\n    ignoreClass = 'OT_ignore',\n  } = opts;\n\n  if (css(container, 'display') === 'none') {\n    return;\n  }\n  let id = container.getAttribute('id');\n  if (!id) {\n    id = `OT_${cheapUUID()}`;\n    container.setAttribute('id', id);\n  }\n\n  opts.containerHeight = getHeight(container)\n    - getCSSNumber(container, 'borderTop')\n    - getCSSNumber(container, 'borderBottom');\n  opts.containerWidth = getWidth(container)\n    - getCSSNumber(container, 'borderLeft')\n    - getCSSNumber(container, 'borderRight');\n\n  const children = Array.prototype.filter.call(\n    container.querySelectorAll(`#${id}>*:not(.${ignoreClass})`),\n    filterDisplayNone\n  );\n  const elements = children.map((element) => {\n    const res = getChildDims(element);\n    res.big = element.classList.contains(bigClass);\n    return res;\n  });\n\n  const boxes = getLayout(opts, elements);\n  boxes.forEach((box, idx) => {\n    const elem = children[idx];\n    css(elem, 'position', 'absolute');\n    const actualWidth = box.width - getCSSNumber(elem, 'paddingLeft')\n      - getCSSNumber(elem, 'paddingRight')\n      - getCSSNumber(elem, 'marginLeft')\n      - getCSSNumber(elem, 'marginRight')\n      - getCSSNumber(elem, 'borderLeft')\n      - getCSSNumber(elem, 'borderRight');\n\n    const actualHeight = box.height - getCSSNumber(elem, 'paddingTop')\n      - getCSSNumber(elem, 'paddingBottom')\n      - getCSSNumber(elem, 'marginTop')\n      - getCSSNumber(elem, 'marginBottom')\n      - getCSSNumber(elem, 'borderTop')\n      - getCSSNumber(elem, 'borderBottom');\n\n    positionElement(elem, box.left, box.top, actualWidth, actualHeight,\n      animate, opts.onLayout);\n  });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(352);\n"],"sourceRoot":""}