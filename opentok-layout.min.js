!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.initLayoutContainer=e():t.initLayoutContainer=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";var o=function(t,e,i,o,r,n,a){for(var d=void 0,h=void 0,f=void 0,g=void 0,l=void 0,s=void 0,c=void 0,u=void 0,v=1;v<=r;v+=1){var m=v,p=Math.ceil(r/m);(u=(c=Math.floor(o/p))/(s=Math.floor(i/m)))>e?c=s*(u=e):u<t&&(s=c/(u=t));var x=(s=Math.min(n,s))*(c=Math.min(a,c))*r;(void 0===d||x>=d)&&(d=x,g=c,l=s,h=m,f=p)}return{maxArea:d,targetCols:h,targetRows:f,targetHeight:g,targetWidth:l,ratio:g/l}},r=function(t,e){var i=t.maxRatio,r=t.minRatio,n=t.fixedRatio,a=t.containerWidth,d=t.containerHeight,h=t.offsetLeft,f=void 0===h?0:h,g=t.offsetTop,l=void 0===g?0:g,s=t.alignItems,c=void 0===s?"center":s,u=t.maxWidth,v=void 0===u?1/0:u,m=t.maxHeight,p=void 0===m?1/0:m,x=t.scaleLastRow,b=void 0===x||x,w=e.map((function(t){return t.height/t.width})),y=w.length,R=void 0;if(n){var H=w.length>0?w[0]:null;R=o(H,H,a,d,y,v,p)}else R=o(r,i,a,d,y,v,p);for(var W=0,M=0,L=[],S=void 0,T=[],I=0;I<w.length;I+=1){I%R.targetCols==0&&(S={ratios:[],width:0,height:0},L.push(S));var O=w[I];S.ratios.push(O);var j=R.targetWidth,_=R.targetHeight;n&&(j=_/O),S.width+=j,S.height=_}for(var C=0,P=0,A=0;A<L.length;A+=1)(S=L[A]).width>a?(S.height=Math.floor(S.height*(a/S.width)),S.width=a):S.width<a&&S.height<p&&(P+=1),C+=S.height;if(b&&C<d&&P>0){var k=d-C;C=0;for(var E=0;E<L.length;E+=1){if((S=L[E]).width<a){var q=k/P;q/S.height>(a-S.width)/S.width&&(q=Math.floor((a-S.width)/S.width*S.height)),S.width+=Math.floor(q/S.height*S.width),S.height+=q,k-=q,P-=1}C+=S.height}}switch(c){case"start":M=0;break;case"end":M=d-C;break;case"center":default:M=(d-C)/2}for(var N=0;N<L.length;N+=1){S=L[N];var F=void 0;switch(c){case"start":F=0;break;case"end":F=a-S.width;break;case"center":default:F=(a-S.width)/2}W=F;for(var $=void 0,z=0;z<S.ratios.length;z+=1){var B=S.ratios[z],V=R.targetWidth;$=S.height,n?V=Math.floor($/B):$/V!=R.targetHeight/R.targetWidth&&(V=Math.floor(R.targetWidth/R.targetHeight*$)),T.push({left:W+f,top:M+l,width:V,height:$}),W+=V}M+=$}return T};t.exports=function(t,e){var i,n=t.maxRatio,a=void 0===n?1.5:n,d=t.minRatio,h=void 0===d?9/16:d,f=t.fixedRatio,g=void 0!==f&&f,l=t.bigPercentage,s=void 0===l?.8:l,c=t.minBigPercentage,u=void 0===c?0:c,v=t.bigFixedRatio,m=void 0!==v&&v,p=t.bigMaxRatio,x=void 0===p?1.5:p,b=t.bigMinRatio,w=void 0===b?9/16:b,y=t.bigFirst,R=void 0===y||y,H=t.containerWidth,W=void 0===H?640:H,M=t.containerHeight,L=void 0===M?480:M,S=t.alignItems,T=void 0===S?"center":S,I=t.bigAlignItems,O=void 0===I?"center":I,j=t.smallAlignItems,_=void 0===j?"center":j,C=t.maxWidth,P=void 0===C?1/0:C,A=t.maxHeight,k=void 0===A?1/0:A,E=t.smallMaxWidth,q=void 0===E?1/0:E,N=t.smallMaxHeight,F=void 0===N?1/0:N,$=t.bigMaxWidth,z=void 0===$?1/0:$,B=t.bigMaxHeight,V=void 0===B?1/0:B,D=t.scaleLastRow,G=void 0===D||D,J=t.bigScaleLastRow,K=void 0===J||J,Q=L/W,U=0,X=0,Y=0,Z=0,tt=[],et=e.filter((function(t,e){return!!t.big&&(tt.push(e),!0)})),it=e.filter((function(t){return!t.big})),ot=[],rt=[];if(et.length>0&&it.length>0){var nt=void 0,at=void 0,dt=!0===R;if(Q>(i=et[0]).height/i.width){if(nt=W,at=Math.floor(L*s),u>0){var ht=void 0;if(m){var ft=et[0].height/et[0].width;ht=o(ft,ft,nt,at,et.length,z,V)}else ht=o(w,x,nt,at,et.length,z,V);at=Math.max(L*u,Math.min(at,ht.targetHeight*ht.targetRows));var gt=o(h,a,W,L-at,it.length,q,F);at=Math.max(at,L-gt.targetRows*gt.targetHeight)}Y=L-(X=at),"column"===R?dt=!1:"row"===R&&(dt=!0)}else{if(at=L,nt=Math.floor(W*s),u>0){var lt=void 0;if(m){var st=et[0].height/et[0].width;lt=o(st,st,nt,at,et.length,z,V)}else lt=o(w,x,nt,at,et.length,z,V);nt=Math.max(W*u,Math.min(nt,lt.targetWidth*lt.targetCols));var ct=o(h,a,W-nt,L,it.length,q,F);nt=Math.max(nt,W-ct.targetCols*ct.targetWidth)}Z=W-(U=nt),"column"===R?dt=!0:"row"===R&&(dt=!1)}dt?(ot=r({containerWidth:nt,containerHeight:at,offsetLeft:0,offsetTop:0,fixedRatio:m,minRatio:w,maxRatio:x,alignItems:O,maxWidth:z,maxHeight:V,scaleLastRow:K},et),rt=r({containerWidth:W-U,containerHeight:L-X,offsetLeft:U,offsetTop:X,fixedRatio:g,minRatio:h,maxRatio:a,alignItems:_,maxWidth:q,maxHeight:F,scaleLastRow:G},it)):(rt=r({containerWidth:W-U,containerHeight:L-X,offsetLeft:0,offsetTop:0,fixedRatio:g,minRatio:h,maxRatio:a,alignItems:_,maxWidth:q,maxHeight:F,scaleLastRow:G},it),ot=r({containerWidth:nt,containerHeight:at,offsetLeft:Z,offsetTop:Y,fixedRatio:m,minRatio:w,alignItems:O,maxWidth:z,maxHeight:V,scaleLastRow:K},et))}else et.length>0&&0===it.length?ot=r({containerWidth:W,containerHeight:L,fixedRatio:m,minRatio:w,maxRatio:x,alignItems:O,maxWidth:z,maxHeight:V,scaleLastRow:K},et):rt=r({containerWidth:W-U,containerHeight:L-X,offsetLeft:U,offsetTop:X,fixedRatio:g,minRatio:h,maxRatio:a,alignItems:T,maxWidth:P,maxHeight:k,scaleLastRow:G},it);var ut=[],vt=0,mt=0;return e.forEach((function(t,e){tt.indexOf(e)>-1?(ut[e]=ot[vt],vt+=1):(ut[e]=rt[mt],mt+=1)})),ut}},function(t,e,i){"use strict";
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 * */var o=i(0),r=i(2);t.exports=function(t,e){var i=e&&e.window||("undefined"==typeof window?void 0:window);return t="string"==typeof t?i.document.querySelector(t):t,void 0===(i&&i.HTMLElement)||t instanceof i.HTMLElement||e?e||(e={}):e=t,{layout:r.bind(this,t,e),getLayout:o.bind(this,e)}}},function(t,e,i){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=i(0);t.exports=function(t,e){function i(t,r,n){if(n)return t.style[r]=n,NaN;if("object"===(void 0===r?"undefined":o(r)))return Object.keys(r).forEach((function(e){i(t,e,r[e])})),NaN;var a=(e&&e.window||window).getComputedStyle(t).getPropertyValue(r);return""===a&&(a=t.style[r]),a}var n=function(t,e){var o=i(t,e);return o?parseInt(o,10):0},a=e.animate,d=void 0!==a&&a,h=e.bigClass,f=void 0===h?"OT_big":h,g=e.ignoreClass,l=void 0===g?"OT_ignore":g;if("none"!==i(t,"display")){var s,c,u=t.getAttribute("id");u||(u="OT_"+(1e8*Math.random()).toFixed(0),t.setAttribute("id",u)),e.containerHeight=((c=(s=t).offsetHeight>0?s.offsetHeight+"px":i(s,"height"))?parseInt(c,10):0)-n(t,"border-top")-n(t,"border-bottom"),e.containerWidth=function(t){var e,o=(e=t).offsetWidth>0?e.offsetWidth+"px":i(e,"width");return o?parseInt(o,10):0}(t)-n(t,"border-left")-n(t,"border-right");var v=Array.prototype.filter.call(t.querySelectorAll("#"+u+">*:not(."+l+")"),(function(t){return"none"!==i(t,"display")})),m=v.map((function(t){var e=function(t){if(t){if(t.videoHeight&&t.videoWidth)return{height:t.videoHeight,width:t.videoWidth};var e=t.querySelector("video");if(e&&e.videoHeight&&e.videoWidth)return{height:e.videoHeight,width:e.videoWidth}}return{height:480,width:640}}(t);return e.big=t.classList.contains(f),e}));r(e,m).forEach((function(t,o){var r=v[o];i(r,"position","absolute");var a=t.width-n(r,"margin-left")-n(r,"margin-right")-("border-box"!==i(r,"box-sizing")?n(r,"padding-left")+n(r,"padding-right")+n(r,"border-left")+n(r,"border-right"):0),h=t.height-n(r,"margin-top")-n(r,"margin-bottom")-("border-box"!==i(r,"box-sizing")?n(r,"padding-top")+n(r,"padding-bottom")+n(r,"border-top")+n(r,"border-bottom"):0);!function(t,e,o,r,n,a,d){var h=this,f={left:e+"px",top:o+"px",width:r+"px",height:n+"px"},g=function(){var e=t.querySelector(".OT_root");if(e){var i=e.style.width;e.style.width=r+"px",e.style.width=i||""}};a&&"undefined"!=typeof $?($(t).stop(),$(t).animate(f,a.duration||200,a.easing||"swing",(function(){g(),a.complete&&a.complete.call(h),d&&d(t,{left:e,top:o,width:r,height:n})}))):(i(t,f),t.classList.contains("ot-layout")||t.classList.add("ot-layout"),d&&d(t,{left:e,top:o,width:r,height:n})),g()}(r,t.left,t.top,a,h,d,e.onLayout)}))}}}])}));
//# sourceMappingURL=opentok-layout.min.js.map